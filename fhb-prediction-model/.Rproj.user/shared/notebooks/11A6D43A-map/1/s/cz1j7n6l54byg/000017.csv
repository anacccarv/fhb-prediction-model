"0","# Geographic data"
"0","BRA <- ne_states(country = ""Brazil"", returnclass = ""sf"")"
"0",""
"0","# Import data"
"0","lat_lon <- gsheet2tbl(""https://docs.google.com/spreadsheets/d/1MBiKsosQ8Hob6LkS65_1pPU25hx1CO9i42Sm_xf28ww/edit?gid=0#gid=0"") |>"
"0","    dplyr::select(study, location, state, lat, lon) |> "
"0","    filter(study %in% 1:125) |> "
"0","  group_by(location) |>"
"0","  summarise("
"0","    state = first(state),"
"0","    lat   = first(lat),"
"0","    lon   = first(lon),"
"0","    n_studies = n_distinct(study)  # conta estudos únicos"
"0","  ) |>"
"0","  ungroup()"
"0",""
"0","lat_lon$lat <- as.numeric(lat_lon$lat)"
"0","lat_lon$lon <- as.numeric(lat_lon$lon)"
"0",""
"0","# Define map boundaries based on coordinates"
"0","long_min <- min(lat_lon$lon, na.rm = TRUE) - 3.5"
"0","long_max <- max(lat_lon$lon, na.rm = TRUE) + 3.5"
"0","lat_min <- min(lat_lon$lat, na.rm = TRUE) - 2.5"
"0","lat_max <- max(lat_lon$lat, na.rm = TRUE) + 3.5"
"0",""
"0","# Highlight selected states"
"0","highlighted_states <- c(""PR"", ""RS"", ""SC"")"
"0","BRA$highlight <- ifelse(BRA$postal %in% highlighted_states, ""Highlighted"", ""Normal"")"
"0",""
"0","# Label adjustments"
"0","nudge_x_vals <- ifelse(lat_lon$local == ""Água Santa"", -0.7, 0.5)"
"0","nudge_y_vals <- ifelse(lat_lon$local == ""Água Santa"", -1, 0.7)"
